<div>DashBoard Page</div>
{{user.name}}


{{!-- Display the Blog posts that User has created and the option to add a new one. --}}
{{#each usersBlogs }}
{{> blog-template }}
{{/each}}
{{!-- Dashboard should not show comments{{#each blogComments}}
{{> comment-template}}
{{/each}} --}}
{{! Blog Input Box }}
<div id="blogDiv">
      <div class="form-floating">
            <textarea class="form-control" id="blogTitle"></textarea>
            <label for="blogTitle">Blog Title</label>
      </div>
      <div class="form-floating">
            <textarea class="form-control" id="blogBody" style="height: 100px"></textarea>
            <label for="blogBody">Blog Body Contents</label>
      </div>
</div>
<div>
      <button id="postBtn" class="btn btn-primary">Post Blog +</button>
</div>


<script>
      const editBlogFormHandler = async (event) => {
            event.preventDefault();
            console.log("ðŸš” from inside postBlogFormHandlerT:", event.target)

            // Collect values from the blog form
            const title = document.getElementById("blogTitle").value.trim();
            const body = document.getElementById("blogBody").value.trim();

            if (title && body) {
                  const response = await fetch("/api/users/blogs", {
                        method: "PUT",
                        body: JSON.stringify({ user_id: 1, title: title, body: body }),
                        headers: { "Content-Type": "application/json" },
                  })

                  if (response.ok) {
                        document.location.replace("/dashboard");
                  }
                  else {
                        alert(response.statusText);
                  }
            }
      };

      document
            .getElementById("postBtn")
            .addEventListener("click", editBlogFormHandler);

      const postCommentFormHandler = async (event) => {
            event.preventDefault();
            console.log("ðŸš” from inside postCommentFormHandler:", event.target)

            //Collect values from the blog form
            const title = document.getElementById("blogTitle").value.trim();
            const body = document.getElementById("blogBody").value.trim();

            if (true) {
                  const response = await fetch("/api/users/comments", {
                        method: "POST",
                        // Make a user form input or get from {{user.name}}
                        body: JSON.stringify({ user_id: user_id, title: title, body: body }),
                        headers: { "Content-Type": "application/json" },
                  })

                  if (response.ok) {
                        document.location.replace("/dashboard");
                  }
                  else {
                        alert(response.statusText);
                  }
            }
      };

      document
            .getElementById("postBtn")
            .addEventListener("click", postCommentFormHandler);
</script>

{{!--
commentBtn.addEventListener("click", function () {
if (commentDiv.classList =
"hidden") { commentDiv.classList.toggle("show");
}
else {
commentDiv.classList.toggle("hidden")
}
}); --}}